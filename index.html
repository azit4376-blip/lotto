<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUANTUM MULTI-INSIGHT</title>
    <meta name="google-site-verification" content="u36-FtkXCnHJ3qi2akqjFoLQ2M7pudNXb6r19_hKcMg" />
    <meta name="description" content="QUANTUM MULTI-INSIGHT - AI ì‹ ê²½ë§ ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ ë¡œë˜ 6/45 ë° ì—°ê¸ˆë³µê¶Œ 720+ ì •ë°€ ë¶„ì„ ì‹œìŠ¤í…œ. 11ëŒ€ ì§€í‘œë¥¼ í†µí•´ ìµœì ì˜ ê³¨ë“ ì¡´ ì¡°í•©ì„ ë„ì¶œí•©ë‹ˆë‹¤.">
    <meta name="keywords" content="ë¡œë˜ë¶„ì„, ë¡œë˜ë²ˆí˜¸ìƒì„±ê¸°, ì—°ê¸ˆë³µê¶Œ720, ì—°ê¸ˆë³µê¶Œë¶„ì„, AIë¡œë˜, í€€í…€ë¡œë˜, ë¡œë˜í†µê³„, ë³µê¶Œì˜ˆìƒë²ˆí˜¸">
    <meta name="author" content="QUANTUM LOTTO">
    <link rel="canonical" href="https://azit4376-blip.github.io/lotto/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="QUANTUM MULTI-INSIGHT">
    <meta property="og:description" content="ë°ì´í„° ê¸°ë°˜ì˜ ì •ë°€ ë¡œë˜/ì—°ê¸ˆë³µê¶Œ ë¶„ì„ ì†”ë£¨ì…˜. ìµœì ì˜ í™•ë¥  ë°¸ëŸ°ìŠ¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.">
    <meta property="og:url" content="https://azit4376-blip.github.io/lotto/">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸŒŒ</text></svg>">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        .donation-wrap { margin-top: 40px; padding: 35px 20px; background: linear-gradient(180deg, rgba(251, 191, 36, 0.05) 0%, rgba(15, 23, 42, 0.8) 100%); border: 1px dashed rgba(251, 191, 36, 0.3); border-radius: 35px; text-align: center; }
        .donation-title { font-size: 1rem; color: var(--gold); font-weight: 900; margin-bottom: 8px; font-family: 'Orbitron', 'Pretendard'; letter-spacing: 1px; }
        .donation-sub { font-size: 0.8rem; color: #fff; font-weight: 700; margin-bottom: 20px; letter-spacing: -0.5px; }
        .qr-container { background: #fff; padding: 10px; display: inline-block; border-radius: 18px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3); margin-bottom: 18px; }
        .qr-img { width: 140px; height: 140px; display: block; border-radius: 8px; }
        .donation-msg { font-size: 0.75rem; color: #94a3b8; line-height: 1.7; word-break: keep-all; }
        .donation-msg span { color: var(--gold); font-weight: 800; }
        
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Pretendard:wght@400;600;900&family=Roboto+Mono:wght@700&display=swap');
        
        :root { --bg: #030712; --card: #1e293b; --primary: #38bdf8; --accent: #fb7185; --text: #ffffff; --dim: #94a3b8; --win: #4ade80; --gold: #fbbf24; --glass: rgba(255, 255, 255, 0.05); --strong: #f43f5e; --legend: #a855f7; }
        [data-theme='light'] { --bg: #f8fafc; --card: #ffffff; --text: #0f172a; --dim: #475569; --glass: rgba(0, 0, 0, 0.03); --primary: #0284c7; }

        body { font-family: 'Pretendard', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; display: flex; justify-content: center; scroll-behavior: smooth; transition: background 0.3s; }
        .dashboard { width: 100%; max-width: 500px; padding-bottom: 220px; }
        .dday-ticker { text-align: center; margin-bottom: 15px; font-family: 'Orbitron', 'Pretendard'; font-size: 0.7rem; font-weight: 800; color: var(--primary); letter-spacing: 1px; background: rgba(56, 189, 248, 0.05); padding: 8px; border-radius: 12px; border: 1px solid rgba(56, 189, 248, 0.1); }
        .main-header { text-align: center; padding: 50px 20px 30px; border-radius: 40px; background: linear-gradient(135deg, #0f172a 0%, #020617 100%); border: 1px solid rgba(56, 189, 248, 0.4); margin-bottom: 25px; box-shadow: 0 0 40px rgba(56, 189, 248, 0.15); position: relative; }
        [data-theme='light'] .main-header { background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%); border: 1px solid rgba(2, 132, 199, 0.2); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05); }
        [data-theme='light'] .main-header h1 { color: #0369a1; text-shadow: none; }
        [data-theme='light'] .sub-tag { color: #0ea5e9; }
        .main-header h1 { font-size: 1.6rem; font-weight: 900; color: var(--primary); text-shadow: 0 0 20px rgba(56, 189, 248, 0.6); margin: 0; font-family: 'Orbitron'; letter-spacing: -1px; }
        .sub-tag { font-size: 0.65rem; color: #7dd3fc; margin-top: 12px; font-weight: 800; letter-spacing: 2px; font-family: 'Orbitron'; text-transform: uppercase; }
        .visitor-counter { display: inline-flex; align-items: center; gap: 10px; margin-top: 20px; background: rgba(0,0,0,0.4); padding: 5px 12px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); }
        .v-stat { font-size: 0.6rem; color: var(--dim); font-weight: 700; font-family: 'Orbitron'; letter-spacing: 1px; }
        .hits-img { display: block; border-radius: 4px; filter: grayscale(1) brightness(1.5); }
        .mode-switch { display: flex; gap: 10px; margin-bottom: 20px; background: #111827; padding: 6px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); }
        [data-theme='light'] .mode-switch { background: #e2e8f0; border: 1px solid #cbd5e1; }
        .mode-btn { flex: 1; padding: 12px; border-radius: 15px; border: none; background: transparent; color: var(--dim); font-weight: 800; font-size: 0.85rem; cursor: pointer; transition: 0.3s; }
        .mode-btn.active { background: var(--primary); color: #000; box-shadow: 0 5px 15px rgba(56, 189, 248, 0.3); }
        .recent-summary { background: rgba(15, 23, 42, 0.8); border-radius: 25px; padding: 20px; margin-bottom: 15px; border: 1px solid var(--primary); box-shadow: 0 0 15px rgba(56, 189, 248, 0.2); }
        [data-theme='light'] .recent-summary { background: #ffffff; border: 1px solid var(--primary); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .recent-meta { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.75rem; font-weight: 800; color: var(--gold); }
        [data-theme='light'] .recent-meta { color: #b45309; }
        .recent-balls { display: flex; justify-content: center; gap: 6px; flex-wrap: wrap; }
        .ball-s { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 900; color: #fff; box-shadow: 0 3px 6px rgba(0,0,0,0.3); }
        .stats-container { display: flex; justify-content: space-between; gap: 8px; margin-bottom: 15px; }
        .stat-card { flex: 1; background: var(--card); border: 1px solid rgba(255,255,255,0.1); padding: 15px 5px; border-radius: 20px; text-align: center; min-width: 0; }
        [data-theme='light'] .stat-card { border: 1px solid #e2e8f0; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        .stat-label { font-size: 0.6rem; color: var(--dim); display: block; margin-bottom: 5px; font-weight: 700; }
        .stat-value { font-size: 0.8rem; font-weight: 900; color: var(--win); font-family: 'Orbitron'; line-height: 1.2; }
        [data-theme='light'] .stat-value { color: #0284c7; }
        .terminal { background: #000; border-radius: 20px; padding: 18px; font-family: 'Courier New', monospace; font-size: 0.75rem; color: #4ade80; margin-bottom: 25px; height: 110px; overflow-y: auto; border: 1px solid #1e293b; line-height: 1.6; }
        [data-theme='light'] .terminal { background: #1e293b; border: 1px solid #cbd5e1; }
        .log-line { border-bottom: 1px solid rgba(255,255,255,0.05); padding: 2px 0; word-break: break-all; }
        #batch-copy-gen { background: rgba(16, 185, 129, 0.1) !important; border: 1px solid var(--win) !important; color: var(--win) !important; }
        #batch-slip-gen { background: rgba(251, 191, 36, 0.1) !important; border: 1px solid var(--gold) !important; color: var(--gold) !important; }
        #batch-copy-gen:hover, #batch-slip-gen:hover { filter: brightness(1.2); }
        .nav-tabs { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 30px; background: #111827; padding: 8px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.05); }
        [data-theme='light'] .nav-tabs { background: #e2e8f0; border: 1px solid #cbd5e1; }
        .tab { flex: 1 1 calc(33% - 6px); box-sizing: border-box; text-align: center; padding: 12px 2px; border-radius: 18px; cursor: pointer; font-size: 0.85rem; font-weight: 800; color: var(--dim); transition: 0.3s; white-space: nowrap; overflow: hidden; }
        .tab.active { background: var(--primary); color: #000; font-weight: 900; }
        @media screen and (max-width: 380px) { .tab { font-size: 0.7rem; padding: 10px 0; flex: 1 1 calc(33% - 4px); } }
        .filter-section { background: var(--card); border-radius: 30px; padding: 25px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }
        [data-theme='light'] .filter-section { border: 1px solid #e2e8f0; }
        .input-group { display: flex; gap: 8px; margin-bottom: 12px; }
        .input-main { flex: 1; background: #000; border: 1px solid #334155; padding: 12px; border-radius: 12px; color: #fff; font-size: 0.8rem; }
        [data-theme='light'] .input-main { background: #fff; border: 1px solid #cbd5e1; color: #0f172a; }
        .btn-add { background: #334155; color: #fff; border: none; padding: 0 15px; border-radius: 12px; font-weight: 800; cursor: pointer; }
        .chip-group { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 10px; }
        .chip { padding: 6px 12px; border-radius: 10px; font-size: 0.7rem; font-weight: 900; display: flex; align-items: center; gap: 6px; }
        .chip-fix { background: var(--win); color: #000; }
        .chip-exc { background: var(--accent); color: #fff; }
        .carry-guide { background: rgba(74, 222, 128, 0.1); border: 1px solid var(--win); color: var(--win); padding: 12px; border-radius: 15px; font-size: 0.7rem; font-weight: 700; margin-bottom: 20px; text-align: center; }
        [data-theme='light'] .carry-guide { background: #f0fdf4; color: #16a34a; }
        .custom-gen-box { background: var(--glass); padding: 20px; border-radius: 25px; margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.05); }
        .gen-label { font-size: 0.75rem; color: var(--primary); font-weight: 900; margin-bottom: 15px; display: block; font-family: 'Orbitron'; letter-spacing: 1px; }
        .input-qty { background: #000; border: 2px solid #334155; border-radius: 12px; padding: 10px; color: var(--win); font-family: 'Orbitron'; font-weight: 900; font-size: 1rem; width: 100px; text-align: center; margin-right: 10px; outline: none; }
        [data-theme='light'] .input-qty { background: #fff; border: 2px solid #cbd5e1; color: #16a34a; }
        .res-card, .history-card { background: #1e293b; border-radius: 35px; padding: 25px; margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.1); position: relative; cursor: pointer; transition: 0.4s; overflow: hidden; }
        .res-card.collapsed, .history-card.collapsed { max-height: 155px; }
        [data-theme='light'] .res-card, [data-theme='light'] .history-card { background: #fff; border: 1px solid #e2e8f0; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05); }
        .badge { position: absolute; top: 18px; right: 18px; padding: 4px 10px; border-radius: 8px; font-size: 0.65rem; font-weight: 900; font-family: 'Orbitron'; z-index: 5; }
        .badge-normal { background: var(--dim); color: #000; }
        .badge-strong { background: var(--strong); color: #fff; }
        .badge-legend { background: var(--legend); color: #fff; }
        .ai-comment { background: rgba(56, 189, 248, 0.1); border-left: 5px solid var(--primary); padding: 12px; border-radius: 0 12px 12px 0; font-size: 0.75rem; color: #bae6fd; font-weight: 700; margin-bottom: 20px; line-height: 1.5; }
        [data-theme='light'] .ai-comment { background: #f0f9ff; color: #0369a1; border-left-color: #0284c7; }
        .heatmap-cell { aspect-ratio: 1; border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .hm-num { font-weight: 900; font-size: 0.9rem; font-family: 'Orbitron'; }
        .hm-count { font-size: 0.6rem; color: var(--dim); margin-top: 2px; }
        .heatmap-cell.active { border-color: var(--primary); box-shadow: 0 0 10px rgba(56, 189, 248, 0.2); }
        .prize-row { display: flex; justify-content: flex-end; gap: 12px; font-size: 0.7rem; font-weight: 800; margin-bottom: 15px; margin-top: -5px; }
        .p-gold { color: var(--gold); }
        .p-blue { color: var(--primary); }
        .ball-group { display: flex; gap: 8px; justify-content: center; margin: 20px 0; flex-wrap: nowrap; }
        .ball { width: 38px; height: 38px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 1.1rem; color: #fff; position: relative; box-shadow: 0 5px 12px rgba(0,0,0,0.4); }
        .ball.carry { border: 3px solid var(--win); box-shadow: 0 0 15px var(--win); }
        .ball.carry::after { content: 'ì´ì›”'; position: absolute; top: -18px; left: 50%; transform: translateX(-50%); font-size: 0.5rem; color: var(--win); font-weight: 900; }
        .group-tag { background: var(--gold); color: #000; padding: 4px 8px; border-radius: 8px; font-size: 0.9rem; font-weight: 900; margin-right: 8px; align-self: center; }
        .l1, .b1 { background: radial-gradient(circle, #f87171, #dc2626); }
        .l2, .b2 { background: radial-gradient(circle, #fb923c, #ea580c); }
        .l3, .b3 { background: radial-gradient(circle, #fbbf24, #d97706); }
        .l4, .b4 { background: radial-gradient(circle, #4ade80, #16a34a); }
        .l5, .b5 { background: radial-gradient(circle, #60a5fa, #2563eb); }
        .b6 { background: radial-gradient(circle, #a855f7, #7c3aed); }
        .metrics-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; background: rgba(0,0,0,0.3); padding: 18px; border-radius: 25px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.05); }
        [data-theme='light'] .metrics-grid { background: #f8fafc; border: 1px solid #e2e8f0; }
        .mt-box { text-align: center; }
        .mt-label { font-size: 0.6rem; color: var(--dim); display: block; margin-bottom: 4px; font-weight: 800; }
        .mt-val { font-size: 0.75rem; font-weight: 900; color: #f1f5f9; }
        [data-theme='light'] .mt-val { color: #334155; }
        .highlight { color: var(--primary) !important; }
        .card-btn-group { display: flex; gap: 8px; margin-top: 10px; }
        .btn-card-action { flex: 1; background: var(--glass); border: 1px solid rgba(255,255,255,0.1); color: var(--primary); padding: 10px; border-radius: 12px; font-size: 0.75rem; font-weight: 800; cursor: pointer; }
        .gen-btn-row { display: grid !important; grid-template-columns: repeat(6, 1fr); gap: 8px; margin-top: 15px; }
        .btn-gen { width: 100%; background: #334155; color: #fff; border: 1px solid rgba(255, 255, 255, 0.1); padding: 14px 0; border-radius: 12px; font-weight: 900; cursor: pointer; transition: 0.2s; font-size: 0.75rem; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; }
        .btn-normal { grid-column: span 2; border-color: var(--dim) !important; color: var(--dim) !important; }
        .btn-strong { grid-column: span 2; border-color: var(--strong) !important; color: var(--strong) !important; }
        .btn-legend { grid-column: span 2; border-color: var(--legend) !important; color: var(--legend) !important; }
        .btn-save-inline, .btn-clear-gen { grid-column: span 3; flex-direction: row !important; font-size: 0.8rem; padding: 16px 0; }
        .btn-save-inline { border-color: var(--win) !important; color: var(--win) !important; background: rgba(74, 222, 128, 0.05); }
        .btn-clear-gen { border-color: var(--accent) !important; color: var(--accent) !important; }
        #store-batch-row { display: none; gap: 8px; margin-bottom: 20px; align-items: stretch; }
        .btn-copy-all, #store-batch-row .btn-clear-store { flex: 1; height: 48px; margin: 0 !important; padding: 0 5px; border-radius: 12px; font-size: 0.75rem; font-weight: 900; cursor: pointer; display: flex; align-items: center; justify-content: center; white-space: nowrap; }
        #batch-copy-store { background: rgba(16, 185, 129, 0.1); border: 1px solid var(--win); color: var(--win); }
        #batch-slip-store { background: rgba(251, 191, 36, 0.1); border: 1px solid var(--gold); color: var(--gold); }
        #store-batch-row .btn-clear-store { flex: 0.7; border: 1px solid var(--accent); color: var(--accent); background: transparent; }
        .btn-gen:active, .btn-copy-all:active { transform: scale(0.96); }
        .action-bar { position: fixed; bottom: 30px; width: calc(100% - 40px); max-width: 460px; display: flex; gap: 10px; z-index: 1000; }
        .btn-save { flex: 1; background: var(--primary); color: #000; border: none; padding: 20px; border-radius: 22px; font-weight: 900; font-size: 1rem; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .btn-reset { background: var(--accent); color: #fff; padding: 20px; border-radius: 22px; border: none; font-weight: 900; }
        .btn-top { position: fixed; right: 20px; bottom: 120px; width: 50px; height: 50px; background: var(--primary); color: #000; border-radius: 50%; border: none; font-size: 1.2rem; font-weight: 900; cursor: pointer; display: none; align-items: center; justify-content: center; z-index: 1001; box-shadow: 0 10px 20px rgba(0,0,0,0.5); transition: 0.3s; }
        .theme-toggle { position: fixed; right: 20px; bottom: 180px; width: 50px; height: 50px; background: var(--card); color: var(--primary); border-radius: 50%; border: 1px solid var(--primary); display: flex; align-items: center; justify-content: center; z-index: 1002; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.3); font-size: 1.2rem; }
        .footer { text-align: center; padding: 80px 25px 220px; border-top: 1px solid rgba(255,255,255,0.05); margin-top: 50px; }
        .disclaimer-box { background: #111827; border: 1px solid rgba(255,255,255,0.1); padding: 35px; border-radius: 30px; text-align: left; }
        .disclaimer-head { font-size: 0.95rem; color: #fff; font-weight: 900; margin-bottom: 20px; border-left: 5px solid var(--accent); padding-left: 15px; }
        .disclaimer-body { font-size: 0.8rem; color: #94a3b8; line-height: 1.9; text-align: justify; word-break: keep-all; }
        .copy-text { margin-top: 30px; font-size: 0.7rem; color: var(--dim); font-family: 'Orbitron'; letter-spacing: 1px; }
        .hidden { display: none; }
        #slip-render-zone { position: absolute; left: -9999px; top: 0; width: 520px; background: #fff; color: #000; padding: 60px 45px; border: 1px solid #ddd; font-family: 'Pretendard', sans-serif; overflow: hidden; background-image: linear-gradient(#f1f1f1 1px, transparent 1px), linear-gradient(90deg, #f1f1f1 1px, transparent 1px); background-size: 20px 20px; }
        #slip-render-zone::before { content: "QUANTUM MULTI-INSIGHT"; position: absolute; top: 0; left: 0; width: 150%; height: 150%; font-size: 14px; font-weight: 900; color: rgba(0, 0, 0, 0.03); display: flex; flex-wrap: wrap; align-content: flex-start; transform: rotate(-25deg); pointer-events: none; z-index: 0; line-height: 120px; letter-spacing: 10px; }
        .slip-header-wrap, .slip-meta-info, #slip-list-target, .slip-footer-wrap { position: relative; z-index: 1; }
        .slip-header-wrap { text-align: center; border-bottom: 4px double #000; padding-bottom: 20px; margin-bottom: 25px; }
        .slip-main-title { font-size: 2.4rem; font-weight: 900; letter-spacing: 2px; font-family: 'Orbitron'; margin: 0; }
        .slip-sub-title { font-size: 1rem; margin-top: 10px; font-weight: 800; color: #333; letter-spacing: 6px; display: block; }
        .slip-meta-info { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 30px; border-bottom: 1px dashed #333; padding-bottom: 15px; font-weight: 700; color: #444; }
        .slip-row { display: flex; align-items: center; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        .slip-tag { width: 85px; font-size: 1rem; font-weight: 900; color: #555; }
        .slip-num-unit { width: 55px; text-align: center; font-size: 1.7rem; font-weight: 900; font-family: 'Roboto Mono', monospace; color: #000; letter-spacing: 1px; }
        .slip-footer-wrap { border-top: 4px double #000; margin-top: 40px; padding-top: 25px; }
        .slip-price-tag { text-align: right; font-size: 1.8rem; font-weight: 900; font-family: 'Roboto Mono', monospace; }
        .slip-site-url { text-align: center; font-size: 0.9rem; color: #222; margin-top: 20px; font-weight: 900; letter-spacing: 1px; }
        .slip-verify { text-align: center; font-size: 0.75rem; color: #999; margin-top: 15px; letter-spacing: 3px; font-weight: 800; text-transform: uppercase; }
    </style>
</head>
<body>

<div class="dashboard">
    <div class="main-header">
        <h1>ğŸŒŒ QUANTUM MULTI-INSIGHT v21.0</h1>
        <div class="sub-tag">Statistical Golden-Zone Navigator</div>
        <div class="visitor-counter">
            <div class="v-stat">SYSTEM VISITOR ANALYTICS</div>
            <a href="https://myhits.vercel.app" target="_blank" style="text-decoration:none;"><img src="https://myhits.vercel.app/api/hit/https%3A%2F%2Fazit4376-blip.github.io%2Flotto%2F?color=gray&label=HITS&size=small" alt="hits" class="hits-img" /></a>
        </div>
    </div>

    <div class="dday-ticker" id="dday-display">ì¶”ì²¨ ë°ì´í„° ë™ê¸°í™” ì¤‘...</div>
    <div class="mode-switch">
        <button id="mode-lotto" class="mode-btn active" onclick="switchMode('lotto')">ğŸ° ë¡œë˜ 6/45</button>
        <button id="mode-pension" class="mode-btn" onclick="switchMode('pension')">ğŸ« ì—°ê¸ˆ 720+</button>
    </div>

    <div id="recent-win-display" class="recent-summary">
        <div class="recent-meta"><span id="recent-round-label">ğŸ“¡ SYNCING CLOUD DATA...</span><span id="recent-date-label">----.--.--</span></div>
        <div id="recent-balls-row" class="recent-balls"></div>
    </div>

    <div class="stats-container">
        <div class="stat-card"><span class="stat-label" id="hot-label">ğŸ”¥ HOT</span><span class="stat-value" id="hot-v">--</span></div>
        <div class="stat-card"><span class="stat-label" id="cold-label">â„ï¸ COLD</span><span class="stat-value" id="cold-v">--</span></div>
        <div class="stat-card"><span class="stat-label">ğŸ¯ ë¶„ì„ íšŒì°¨</span><span class="stat-value" id="target-round">--íšŒ</span></div>
    </div>

    <div id="shared-terminal-container"><div class="terminal" id="term"></div></div>

    <div class="nav-tabs">
        <div class="tab active" onclick="switchTab('gen', this)">ğŸ² ë¶„ì„ìƒì„±</div>
        <div class="tab" onclick="switchTab('stats', this)">ğŸ“Š íŒ¨í„´í†µê³„</div>
        <div class="tab" onclick="switchTab('win', this)">ğŸ† ë‹¹ì²¨ê²°ê³¼</div>
        <div class="tab" onclick="switchTab('history', this)">ğŸŒ ì‹¤ì‹œê°„ì¡°í•©</div>
        <div class="tab" onclick="switchTab('store', this)">ğŸ“‚ ì €ì¥ì†Œ</div>
    </div>

    <div id="gen-panel">
        <div class="filter-section">
            <div class="input-group"><input type="text" id="fix-in" class="input-main" placeholder="ê³ ì •ìˆ˜ (ì½¤ë§ˆêµ¬ë¶„)"><button class="btn-add" onclick="addFilter('fix')">ê³ ì •</button></div>
            <div id="fix-chips" class="chip-group"></div>
            <div class="input-group"><input type="text" id="exc-in" class="input-main" placeholder="ì œì™¸ìˆ˜ (ì½¤ë§ˆêµ¬ë¶„)"><button class="btn-add" onclick="addFilter('exc')">ì œì™¸</button></div>
            <div id="exc-chips" class="chip-group"></div>
        </div>

        <div class="carry-guide" id="guide-text">ê°•ì¡°ëœ ë²ˆí˜¸ëŠ” ì „íšŒì°¨ ë‹¹ì²¨ë²ˆí˜¸ì¸ <b>'ì´ì›”ìˆ˜'</b> ì…ë‹ˆë‹¤.</div>
        
        <div class="custom-gen-box">
            <span class="gen-label">QUANTITY SETTING</span>
            <div style="display:flex; align-items:center;">
                <select id="gen-qty" class="input-qty" style="appearance: none; -webkit-appearance: none; cursor: pointer;"></select>
                <button class="btn-gen btn-primary" onclick="triggerGen()">ì¼ë°˜ ë¬´ì‘ìœ„ ìƒì„±</button>
            </div>
            <div class="gen-btn-row">
                <button class="btn-gen btn-normal" onclick="triggerGradeGen('NORMAL')"><span>âšª</span> Normal ìƒì„±</button>
                <button class="btn-gen btn-strong" onclick="triggerGradeGen('STRONG')"><span>ğŸ”¥</span> Strong ìƒì„±</button>
                <button class="btn-gen btn-legend" onclick="triggerGradeGen('LEGEND')"><span>ğŸ’</span> Legend ìƒì„±</button>
                <button class="btn-gen btn-save-inline" onclick="saveData()">ğŸ’¾ ë¶„ì„ ì¡°í•© ë³´ê´€í•˜ê¸°</button>
                <button class="btn-gen btn-clear-gen" onclick="clearList()">ğŸ—‘ï¸ í™”ë©´ Clear</button>
            </div>
        </div>

        <div id="batch-action-row" style="display:flex; gap:8px; margin-bottom:20px;">
            <button id="batch-copy-gen" class="btn-copy-all hidden" onclick="copyBatch('gen')" style="flex:1; margin-bottom:0;">ğŸ“‹ ì „ì²´ ì¡°í•© ë³µì‚¬</button>
            <button id="batch-slip-gen" class="btn-copy-all hidden" onclick="captureSlip('gen')" style="flex:1; background:rgba(251,191,36,0.1); border-color:var(--gold); color:var(--gold); margin-bottom:0;">ğŸ“¸ ìŠ¬ë¦½ ì´ë¯¸ì§€ ì €ì¥</button>
        </div>
        <div id="res-list"></div>
    </div>

    <div id="stats-panel" class="hidden">
        <div class="filter-section" style="text-align:center;">
            <span class="gen-label">STATISTICAL RANGE</span>
            <div class="gen-btn-row">
                <button class="btn-gen active" onclick="updateStatsRange(10, this)">ìµœê·¼ 10íšŒ</button>
                <button class="btn-gen" onclick="updateStatsRange(30, this)">ìµœê·¼ 30íšŒ</button>
                <button class="btn-gen" onclick="updateStatsRange(50, this)">ìµœê·¼ 50íšŒ</button>
            </div>
        </div>
        <div class="custom-gen-box">
            <span class="gen-label">NUMBER FREQUENCY HEATMAP</span>
            <div id="heatmap-grid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; margin-top: 15px;"></div>
        </div>
        <div id="stats-summary" style="display:flex; gap:10px;">
            <div class="stat-card" style="flex:1;"><span class="stat-label">ğŸ”¥ ìµœê³  ë¹ˆë„</span><span class="stat-value" id="stat-max-n">--</span></div>
            <div class="stat-card" style="flex:1;"><span class="stat-label">â„ï¸ ìµœì € ë¹ˆë„</span><span class="stat-value" id="stat-min-n">--</span></div>
        </div>
    </div>

    <div id="win-panel" class="hidden"><div id="win-list"></div></div>
    <div id="history-panel" class="hidden"><div id="history-list"></div></div>
    
    <div id="store-panel" class="hidden">
        <div id="store-batch-row">
            <button id="batch-copy-store" class="btn-copy-all" onclick="copyBatch('store')">ğŸ“‹ ì „ì²´ ë³µì‚¬</button>
            <button id="batch-slip-store" class="btn-copy-all" onclick="captureSlip('store')">ğŸ“¸ ìŠ¬ë¦½ ì €ì¥</button>
            <button class="btn-clear-store" onclick="resetStore()">ğŸ—‘ï¸ ë¹„ìš°ê¸°</button>
        </div>
        <div id="store-list"></div>
    </div>

    <button id="btn-top" class="btn-top" onclick="window.scrollTo({ top:0, behavior:'smooth' })">â†‘</button>
    <div class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</div>

    <div class="footer">
        <div class="disclaimer-box">
            <div class="disclaimer-head">ğŸš¨ ë²•ì  ê³ ì§€ ë° í”„ë¦¬ë¯¸ì—„ ë¶„ì„ ì•ˆë‚´</div>
            <div class="disclaimer-body">
                ë³¸ ì‹œìŠ¤í…œì€ ë¡œë˜ ë° ì—°ê¸ˆë³µê¶Œì˜ ë°ì´í„°ë¥¼ ì‹ ê²½ë§ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë¶„ì„í•œ 100% ë¬´ë£Œ ì¸í…”ë¦¬ì „ìŠ¤ ë„êµ¬ì…ë‹ˆë‹¤.<br><br>
                1. <b>ë°ì´í„° ë¶„ì„:</b> ìµœê·¼ 10íšŒì°¨ì˜ í•µì‹¬ íŒ¨í„´ê³¼ 50íšŒì°¨ì˜ ëˆ„ì  ì§€í‘œë¥¼ ê²°í•©í•˜ì—¬ ìµœì ì˜ í™•ë¥  êµ¬ì—­ì„ ë„ì¶œí•©ë‹ˆë‹¤.<br>
                2. <b>ìê¸° ì±…ì„:</b> ëª¨ë“  ê²°ê³¼ í™œìš©ì˜ ì±…ì„ì€ ì‚¬ìš©ì ë³¸ì¸ì—ê²Œ ìˆìœ¼ë©°, ë‹¹ì²¨ ì—¬ë¶€ëŠ” ì‹¤ì œ ì¶”ì²¨ ê²°ê³¼ì— ë”°ë¦…ë‹ˆë‹¤.
            </div>
        </div>

        <div class="donation-wrap">
            <div class="donation-title">COFFEE FOR DEVELOPER</div>
            <div class="donation-sub">í˜¹ì‹œ ì´ë²ˆ íšŒì°¨ì— ë‹¹ì²¨ë˜ì…¨ë‚˜ìš”? ğŸ˜Š</div>
            <div class="qr-container"><img src="https://github.com/azit4376-blip/lotto/blob/main/qrcode.png?raw=true" alt="Support QR" class="qr-img"></div>
            <div class="donation-msg">ì œ ë¶„ì„ ë²ˆí˜¸ë¡œ <span>ê¸°ë¶„ ì¢‹ì€ ë‹¹ì²¨</span>ì„ ë§ì´í•˜ì…¨ë‹¤ë©´,<br>ê³ ìƒí•œ ê°œë°œìì—ê²Œ ì‹œì›í•œ ì»¤í”¼ í•œ ì” ì„ ë¬¼í•´ ì£¼ì‹œë©´ ì–´ë–¨ê¹Œìš”?<br>ì—¬ëŸ¬ë¶„ì˜ ì†Œì¤‘í•œ í›„ì›ì€ ì‚¬ì´íŠ¸ ìœ ì§€ì— í° í˜ì´ ë©ë‹ˆë‹¤.</div>
        </div>
        <div class="copy-text">Â© 2026 QUANTUM MULTI-INSIGHT. ALL RIGHTS RESERVED.</div>
    </div>
</div>

<div id="slip-render-zone">
    <div class="slip-header-wrap">
        <h2 class="slip-main-title" id="slip-title">QUANTUM MULTI</h2>
        <span class="slip-sub-title">QUANTUM &nbsp; ANALYSIS &nbsp; SYSTEM</span>
    </div>
    <div class="slip-meta-info">
        <span id="slip-round">ì œ &nbsp; ---- &nbsp; íšŒ &nbsp; ë¶„ì„ì¡°í•©</span>
        <span id="slip-time">2026.01.01 &nbsp; 00 : 00 : 00</span>
    </div>
    <div id="slip-list-target"></div>
    <div class="slip-footer-wrap">
        <div class="slip-price-tag" id="slip-price">ê¸ˆì•¡ â‚© 0,000</div>
        <div class="slip-site-url">azit4376-blip.github.io/lotto/</div>
        <div class="slip-verify">VALIDATED BY QUANTUM MULTI-INSIGHT ENGINE</div>
    </div>
</div>

<script>
const API_URLS={lotto:"https://script.google.com/macros/s/AKfycbxFjCoZUcfTYRmPiWjJL3Q4_5S5Dzq8TNRPI0_73VYrRJ1QuoHryi6I4qOE-7wxbH--/exec",pension:"https://script.google.com/macros/s/AKfycbzzQNFIXSo7WkRpVAPkR1M-8PbpZYokVBFPlChXfK3IgCxyI2dpxj8R6cI_k5b6gXLS/exec"},LOTTO_CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlGZv0VLyDVm6SviCjdd08hZpXWXHiPzcgXAurWBqGjsOOq1CPoRr1LRBzlnR80KDVa_ECBl96pAxJ/pub?output=csv",PENSION_CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vRd4x0RXfEIeLkukYyrO3sU7qL4MX36JeSdfPXJjCO-Kt8bSgC6P341NC81DBTd3Yi8BS82VBvCBhte/pub?gid=0&single=true&output=csv";let currentMode='lotto',DB={lotto:[],pension:[]},coreDB={lotto:[],pension:[]},fixes=new Set(),excs=new Set(),currentStatsRange=10;window.sessionData=[];

window.onload=async()=>{log("ğŸ›°ï¸ í€€í…€ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì† ì¤‘...");const q=document.getElementById('gen-qty');for(let i=1;i<=100;i++){const o=document.createElement('option');o.value=i;o.innerText=i+" ê²Œì„";q.appendChild(o)}q.value=5;await syncData('lotto',LOTTO_CSV_URL);await syncData('pension',PENSION_CSV_URL);updateDDay();setInterval(updateDDay,1000);refreshUI()};

function log(m){const t=document.getElementById('term'),l=document.createElement('div');l.className='log-line';l.innerText=`> ${m}`;t.appendChild(l);t.scrollTop=t.scrollHeight}

async function pushToGlobalBatch(d){if(!d||!d.length)return;try{await fetch(API_URLS[currentMode],{method:'POST',mode:'no-cors',body:JSON.stringify(d)});log(`ğŸŒ [CLOUD] ${d.length}ê±´ ë™ê¸°í™” ì™„ë£Œ.`)}catch(e){console.error("Cloud Sync Fail")}}

async function loadGlobalTimeline(){const l=document.getElementById('history-list');l.innerHTML='<div class="ai-comment">ğŸ“¡ ì‹¤ì‹œê°„ ë¶„ì„ íƒ€ì„ë¼ì¸ ë™ê¸°í™” ì¤‘...</div>';try{const r=await fetch(API_URLS[currentMode]);let d=await r.json();l.innerHTML='';if(!d||!d.length){l.innerHTML='<div class="ai-comment">ìµœê·¼ ìƒì„± ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>';return}d.sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp));const ld=d.slice(0,100);ld.forEach(i=>{const dt=new Date(i.timestamp),ds=dt.toLocaleDateString('ko-KR',{year:'numeric',month:'2-digit',day:'2-digit'}).replace(/\s/g,''),ts=dt.toLocaleTimeString('ko-KR',{hour12:true,hour:'2-digit',minute:'2-digit',second:'2-digit'}),ns=i.numbers.split(',').map(n=>n.trim().padStart(currentMode==='lotto'?2:1,'0')),c=document.createElement('div');c.className='history-card';c.style.cursor='default';const bh=ns.map((n,x)=>{const v=parseInt(n),col=currentMode==='lotto'?getLottoCol(v):`b${(x%6)+1}`;return`<div class="ball ${col}">${n}</div>`}).join('');c.innerHTML=`<span class="badge badge-${(i.grade||'NORMAL').toLowerCase()}">${i.grade}</span><div style="font-size:0.75rem; font-weight:800; color:var(--gold); margin-bottom:12px; line-height:1.4;">ì œ ${i.round}íšŒ ë¶„ì„<br><span style="color:var(--dim); font-size:0.65rem;">${ds} ${ts}</span></div><div class="ball-group" style="margin-bottom:0; justify-content: center;">${bh}</div>`;l.appendChild(c)})}catch(e){l.innerHTML='<div class="ai-comment">âš ï¸ ë°ì´í„°ë¥¼ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>'}}

function updateDDay(){const n=new Date(),td=currentMode==='lotto'?6:4,th=currentMode==='lotto'?20:19,tm=currentMode==='lotto'?35:5;let t=new Date();t.setDate(n.getDate()+(td+7-n.getDay())%7);t.setHours(th,tm,0,0);if(n>t)t.setDate(t.getDate()+7);const df=t-n,d=Math.floor(df/86400000),h=Math.floor((df%86400000)/3600000),m=Math.floor((df%3600000)/60000),s=Math.floor((df%60000)/1000);document.getElementById('dday-display').innerText=`${currentMode==='lotto'?'ë¡œë˜':'ì—°ê¸ˆ'} ì¶”ì²¨ê¹Œì§€: ${d}ì¼ ${h}ì‹œê°„ ${m}ë¶„ ${s}ì´ˆ`}

function toggleTheme(){const b=document.body,c=b.getAttribute('data-theme')||'dark',n=c==='dark'?'light':'dark';b.setAttribute('data-theme',n);log(`ğŸŒ“ [${n.toUpperCase()}] ëª¨ë“œë¡œ ì „í™˜`)}

async function captureCard(id){const c=document.getElementById(id);if(!c)return;const w=c.classList.contains('collapsed');c.classList.remove('collapsed');log("ğŸ“¸ ë¶„ì„ ì´ë¯¸ì§€ ìƒì„± ì¤‘...");try{const cv=await html2canvas(c,{backgroundColor:getComputedStyle(document.body).getPropertyValue('--bg')||'#000',scale:3,useCORS:true}),bl=await new Promise(r=>cv.toBlob(r,'image/png')),im=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),fn=`Quantum_Card_${id}_${Date.now()}.png`;if(!im){const u=URL.createObjectURL(bl),l=document.createElement('a');l.href=u;l.download=fn;document.body.appendChild(l);l.click();l.remove();URL.revokeObjectURL(u);log("âœ… ì¦‰ì‹œ ì €ì¥ ì™„ë£Œ!")}else{const id=cv.toDataURL("image/png"),nw=window.open("","_blank");if(nw)nw.document.write(`<body style="margin:0; background:#000; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; font-family:sans-serif; color:#fff;"><p style="margin-bottom:20px; font-size:16px;">ğŸ‘‡ ì´ë¯¸ì§€ë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬ <b>[ì‚¬ì§„ ì•±ì— ì €ì¥]</b> í•˜ì„¸ìš”</p><img src="${id}" style="max-width:90%; border-radius:15px; box-shadow:0 0 30px rgba(56,189,248,0.4);" /><button onclick="window.close()" style="margin-top:30px; padding:12px 25px; background:#334155; color:#fff; border:none; border-radius:10px; font-weight:800; cursor:pointer;">ë‹«ê¸°</button></body>`)}}catch(e){log("âš ï¸ ìƒì„± ì‹¤íŒ¨");console.error(e)}if(w)c.classList.add('collapsed')}

async function syncData(m,u){try{const r=await fetch(u),t=await r.text();let rws=t.split(/\r?\n/).filter(r=>r.trim()!=='').slice(1);if(rws.length>0){DB[m]=rws.map(rw=>{const c=rw.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(v=>v.replace(/^"|"$/g,'').trim());if(m==='lotto')return{r:parseInt(c[0]),date:c[1],n:[parseInt(c[2]),parseInt(c[3]),parseInt(c[4]),parseInt(c[5]),parseInt(c[6]),parseInt(c[7])],b:parseInt(c[8]),r1m:c[10],r2m:c[12]};else return{r:parseInt(c[0]),date:c[1],group:c[2],n:[parseInt(c[3]),parseInt(c[4]),parseInt(c[5]),parseInt(c[6]),parseInt(c[7]),parseInt(c[8])]}}).filter(i=>!isNaN(i.r)).sort((a,b)=>b.r-a.r);coreDB[m]=DB[m].slice(0,10);log(`âœ… ${m.toUpperCase()} ë°ì´í„° ë™ê¸°í™” ì™„ë£Œ.`)}}catch(e){log(`âš ï¸ ${m} ë™ê¸°í™” ì‹¤íŒ¨.`)}}

function switchMode(m){currentMode=m;document.getElementById('mode-lotto').classList.toggle('active',m==='lotto');document.getElementById('mode-pension').classList.toggle('active',m==='pension');document.getElementById('gen-qty').value=m==='lotto'?5:1;fixes.clear();excs.clear();renderChips();clearList();refreshUI();log(`ğŸ”„ [${m==='lotto'?'ë¡œë˜ 6/45':'ì—°ê¸ˆ 720+'}] ëª¨ë“œë¡œ ì „í™˜`)}

function refreshUI(){const d=DB[currentMode][0];if(!d)return;document.getElementById('target-round').innerText=(d.r+1)+"íšŒ";updateRecentWin(d);updateStats();renderH()}

function updateRecentWin(l){document.getElementById('recent-round-label').innerText=`ì œ ${l.r}íšŒ ë‹¹ì²¨ ê²°ê³¼`;document.getElementById('recent-date-label').innerText=l.date;const br=document.getElementById('recent-balls-row');if(currentMode==='lotto')br.innerHTML=l.n.map(n=>`<div class="ball-s ${getLottoCol(n)}">${n}</div>`).join('')+`<span style="align-self:center; font-weight:900; margin:0 5px;">+</span>`+`<div class="ball-s ${getLottoCol(l.b)}">${l.b}</div>`;else br.innerHTML=`<div class="group-tag">${l.group}</div>`+l.n.map((n,i)=>`<div class="ball-s b${i+1}">${n}</div>`).join('')}

function updateStats(){const cdb=coreDB[currentMode];if(currentMode==='lotto'){const ct={};cdb.forEach(h=>h.n.forEach(n=>ct[n]=(ct[n]||0)+1));const st=Object.entries(ct).sort((a,b)=>b[1]-a[1]);document.getElementById('hot-v').innerText=(st[0]?st[0][0]:"--")+"ë²ˆ";let un=Array.from({length:45},(_,i)=>i+1).filter(n=>!cdb.some(h=>h.n.includes(n)));document.getElementById('cold-v').innerText=(un[0]?un[0]:"--")+"ë²ˆ"}else{let hn=[],cn=[];for(let i=0;i<6;i++){const pn=cdb.map(h=>h.n[i]),ct={};pn.forEach(n=>ct[n]=(ct[n]||0)+1);const st=Object.entries(ct).sort((a,b)=>b[1]-a[1]);hn.push(st[0]?st[0][0]:"?");let un=[0,1,2,3,4,5,6,7,8,9].filter(d=>!pn.includes(d));cn.push(un.length>0?un[0]:"?")}document.getElementById('hot-v').innerText=hn.join(' ');document.getElementById('cold-v').innerText=cn.join(' ')}}

function getMetrics(n){if(currentMode==='lotto'){const s=[...n].sort((a,b)=>a-b),o=n.filter(x=>x%2!==0).length,l=n.filter(x=>x<=22).length,sm=n.reduce((a,b)=>a+b,0),e=n.map(x=>x%10);let d=new Set();for(let i=0;i<n.length;i++)for(let j=i+1;j<n.length;j++)d.add(Math.abs(n[i]-n[j]));const ac=d.size-5;let sr=0;for(let i=0;i<s.length-1;i++)if(s[i+1]-s[i]===1)sr++;const sc=[0,0,0,0,0];n.forEach(x=>{if(x<=10)sc[0]++;else if(x<=20)sc[1]++;else if(x<=30)sc[2]++;else if(x<=40)sc[3]++;else sc[4]++});const pr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43];let scr=70+Math.floor(Math.random()*20);if(sm>=120&&sm<=165)scr+=5;let g=scr>=92?"LEGEND":(scr>=85?"STRONG":"NORMAL");return{m1:`${o}:${6-o}`,m2:`${l}:${6-l}`,m3:ac,m4:e.reduce((a,b)=>a+b,0),m5:sm,m6:s[5]-s[0],m7:(sm/6).toFixed(1),m8:sr,m9:6-new Set(e).size,m10:sc.join('-'),m11:n.filter(x=>pr.includes(x)).length,score:scr,grade:g}}else{const sm=n.reduce((a,b)=>a+b,0),o=n.filter(x=>x%2!==0).length,l=n.filter(x=>x<=4).length;let sr=0;for(let i=0;i<n.length-1;i++)if(Math.abs(n[i+1]-n[i])===1)sr++;let mc=0;if(coreDB.pension.length>0)for(let i=0;i<6;i++)if(coreDB.pension.map(h=>h.n[i]).includes(n[i]))mc++;let scr=75+Math.floor(Math.random()*15);if(sm>=20&&sm<=38)scr+=5;let g=scr>=92?"LEGEND":(scr>=85?"STRONG":"NORMAL");return{p1:`${mc}/6`,p2:sm,p3:`ì €${l}:ê³ ${6-l}`,p4:`í™€${o}:ì§${6-o}`,p5:`${sr}-Step`,p6:n[3]+n[4]+n[5],p7:(sm/6).toFixed(1),p8:n.some(x=>[2,3,5,7].includes(x))?'YES':'NO',score:scr,grade:g}}}

function addFilter(t){const i=document.getElementById(t+'-in'),mv=currentMode==='lotto'?45:9;i.value.split(',').forEach(v=>{const n=parseInt(v.trim());if(n>=0&&n<=mv){if(t==='fix'&&fixes.size<5)fixes.add(n);else if(t==='exc')excs.add(n)}});i.value='';renderChips()}

function renderChips(){document.getElementById('fix-chips').innerHTML=Array.from(fixes).map(n=>`<span class="chip chip-fix">${n} <span onclick="fixes.delete(${n});renderChips();" style="cursor:pointer">Ã—</span></span>`).join('');document.getElementById('exc-chips').innerHTML=Array.from(excs).map(n=>`<span class="chip chip-exc">${n} <span onclick="excs.delete(${n});renderChips();" style="cursor:pointer">Ã—</span></span>`).join('')}

function formatNums(n){return n.map(x=>x.toString().padStart(currentMode==='lotto'?2:1,'0')).join(' ')}

function copyBatch(t){const sk=currentMode==='lotto'?'v13_db':'v13_pension_db',d=t==='gen'?window.sessionData:JSON.parse(localStorage.getItem(sk)||'[]');if(!d.length)return;navigator.clipboard.writeText(d.map(i=>(i.group?i.group+" ":"")+formatNums(i.n)).join('\n'));alert('ğŸ“‹ ë³µì‚¬ ì™„ë£Œ')}

function updateBatchCopyBtn(t){const sk=currentMode==='lotto'?'v13_db':'v13_pension_db',d=t==='gen'?window.sessionData:JSON.parse(localStorage.getItem(sk)||'[]'),cb=document.getElementById(`batch-copy-${t}`);if(cb){cb.innerText=`ğŸ“‹ ì „ì²´ ì¡°í•© ë³µì‚¬ (${d.length}ê±´)`;cb.classList.toggle('hidden',!d.length)}const sb=document.getElementById(`batch-slip-${t}`);if(sb)sb.classList.toggle('hidden',!d.length)}

async function triggerGen(){const c=parseInt(document.getElementById('gen-qty').value)||1,l=document.getElementById('res-list');l.innerHTML='';window.sessionData=[];let bd=[],lr=DB[currentMode][0]?parseInt(DB[currentMode][0].r)+1:0;log(`ğŸ² [${currentMode.toUpperCase()}] ë¶„ì„ ì—”ì§„ ê°€ë™...`);for(let i=0;i<c;i++){let n=[];if(currentMode==='lotto'){while(true){n=Array.from(fixes);while(n.length<6){let r=Math.floor(Math.random()*45)+1;if(!n.includes(r)&&!excs.has(r))n.push(r)}if(n.reduce((a,b)=>a+b,0)>=100)break}n.sort((a,b)=>a-b)}else{for(let j=0;j<6;j++)n.push(Math.floor(Math.random()*10))}const d={n,...getMetrics(n),carryList:currentMode==='lotto'?(DB.lotto[0]?DB.lotto[0].n:[]):[],group:currentMode==='pension'?(Math.floor(Math.random()*5)+1)+"ì¡°":null};window.sessionData.push(d);renderCard(l,d,false);bd.push({round:lr,mode:currentMode,numbers:d.n,grade:d.grade})}updateBatchCopyBtn('gen');log(`âœ… ${c}ê±´ ì™„ë£Œ.`);await pushToGlobalBatch(bd)}

async function triggerGradeGen(tg){const c=parseInt(document.getElementById('gen-qty').value)||1,l=document.getElementById('res-list');l.innerHTML='';window.sessionData=[];let bd=[],lr=DB[currentMode][0]?parseInt(DB[currentMode][0].r)+1:0;log(`ğŸ¯ [${tg}] ë“±ê¸‰ ì¶”ì¶œ ê°œì‹œ...`);let f=0,a=0;while(f<c&&a<10000){a++;let n=[];if(currentMode==='lotto'){n=Array.from(fixes);while(n.length<6){let r=Math.floor(Math.random()*45)+1;if(!n.includes(r)&&!excs.has(r))n.push(r)}n.sort((a,b)=>a-b)}else{for(let j=0;j<6;j++)n.push(Math.floor(Math.random()*10))}const m=getMetrics(n);if(m.grade===tg){const d={n,...m,carryList:currentMode==='lotto'?(DB.lotto[0]?DB.lotto[0].n:[]):[],group:currentMode==='pension'?(Math.floor(Math.random()*5)+1)+"ì¡°":null};window.sessionData.push(d);renderCard(l,d,false);bd.push({round:lr,mode:currentMode,numbers:d.n,grade:d.grade});f++}}updateBatchCopyBtn('gen');log(`âœ… ${tg} ë“±ê¸‰ ì¶”ì¶œ ì™„ë£Œ. (ì—°ì‚°: ${a}íšŒ)`);await pushToGlobalBatch(bd)}

function clearList(){document.getElementById('res-list').innerHTML='';window.sessionData=[];updateBatchCopyBtn('gen');log('ğŸ§¹ ì´ˆê¸°í™” ì™„ë£Œ.')}
function copyToClipboard(n,g){const t=(g?g+" ":"")+formatNums(n);navigator.clipboard.writeText(t);alert('ë³µì‚¬ ì™„ë£Œ')}
function getLottoCol(n){if(n<=10)return'l1';if(n<=20)return'l2';if(n<=30)return'l3';if(n<=40)return'l4';return'l5'}

function renderCard(tg,d,ih){const u=`card-${Math.random().toString(36).substr(2,9)}`,bs=d.n.map((n,i)=>`<div class="ball ${currentMode==='lotto'?getLottoCol(n):'b'+(i+1)} ${(d.carryList||[]).includes(n)?'carry':''}">${n}</div>`).join(''),c=document.createElement('div');c.id=u;c.className=ih?'history-card collapsed':'res-card collapsed';c.onclick=e=>{if(!e.target.closest('button'))c.classList.toggle('collapsed')};let mh=currentMode==='lotto'?`<div class="mt-box"><span class="mt-label">í™€ì§</span><span class="mt-val">${d.m1}</span></div><div class="mt-box"><span class="mt-label">ì €ê³ </span><span class="mt-val">${d.m2}</span></div><div class="mt-box"><span class="mt-label">ACê°’</span><span class="mt-val highlight">${d.m3}</span></div><div class="mt-box"><span class="mt-label">ëìˆ˜í•©</span><span class="mt-val">${d.m4}</span></div><div class="mt-box"><span class="mt-label">ì´í•©</span><span class="mt-val highlight">${d.m5}</span></div><div class="mt-box"><span class="mt-label">ë²”ìœ„</span><span class="mt-val">${d.m6}</span></div><div class="mt-box"><span class="mt-label">í‰ê· </span><span class="mt-val">${d.m7}</span></div><div class="mt-box"><span class="mt-label">ì—°ì†</span><span class="mt-val highlight">${d.m8}</span></div><div class="mt-box"><span class="mt-label">ëì¤‘ë³µ</span><span class="mt-val">${d.m9}</span></div><div class="mt-box" style="grid-column: span 2;"><span class="mt-label">êµ¬ê°„ë¶„í¬</span><span class="mt-val">${d.m10}</span></div><div class="mt-box"><span class="mt-label">ì†Œìˆ˜</span><span class="mt-val highlight">${d.m11}</span></div>`:`<div class="mt-box"><span class="mt-label">ìë¦¬ ë§¤ì¹­</span><span class="mt-val highlight">${d.p1}</span></div><div class="mt-box"><span class="mt-label">ë””ì§€íŠ¸ í•©</span><span class="mt-val highlight">${d.p2}</span></div><div class="mt-box"><span class="mt-label">ì €ê³  ë¹„ìœ¨</span><span class="mt-val">${d.p3}</span></div><div class="mt-box"><span class="mt-label">í™€ì§ ë¹„ìœ¨</span><span class="mt-val">${d.p4}</span></div><div class="mt-box"><span class="mt-label">ì—°ì† íŒ¨í„´</span><span class="mt-val highlight">${d.p5}</span></div><div class="mt-box"><span class="mt-label">ë3ì í•©</span><span class="mt-val">${d.p6}</span></div><div class="mt-box"><span class="mt-label">í‰ê· ê°’</span><span class="mt-val">${d.p7}</span></div><div class="mt-box"><span class="mt-label">ì†Œìˆ˜í¬í•¨</span><span class="mt-val highlight">${d.p8}</span></div>`;c.innerHTML=`${!ih?`<span class="badge badge-${d.grade.toLowerCase()}">${d.grade} ${d.score}%</span>`:''}${ih?`<div style="display:flex; justify-content:space-between; margin-bottom:10px;"><span style="color:var(--gold); font-weight:900;">${d.r?'ì œ '+d.r+'íšŒ ê²°ê³¼':d.date}</span><span>${d.date.includes('ë¶„ì„')?'':d.date}</span></div><div class="prize-row"><span class="p-gold">1ë“±: ${currentMode==='lotto'?(d.r1m||'--'):'ì›” 700ë§Œì› (20ë…„)'}</span><span class="p-blue">2ë“±: ${currentMode==='lotto'?(d.r2m||'--'):'ì›” 100ë§Œì› (10ë…„)'}</span></div>`:'<div class="ai-comment">AI ë¶„ì„ ê²°ê³¼ ìµœì ì˜ ë°¸ëŸ°ìŠ¤ ì ìˆ˜ ë„ì¶œ<br>í´ë¦­í•˜ì—¬ ìƒì„¸ ë¶„ì„ ë°ì´í„° ë³´ê¸°</div>'}<div class="ball-group">${d.group?`<div class="group-tag" style="background:var(--gold); padding:4px 8px; border-radius:8px; font-weight:900; color:#000; margin-right:10px;">${d.group}</div>`:''}${bs}${ih&&currentMode==='lotto'&&d.b?`<span style="align-self:center; font-weight:900; margin:0 5px;">+</span><div class="ball ${getLottoCol(d.b)}">${d.b}</div>`:''}</div><div class="metrics-grid">${mh}</div>${!ih?`<div class="card-btn-group"><button class="btn-card-action" onclick="copyToClipboard([${d.n}], '${d.group||''}')">ğŸ“‹ ë³µì‚¬</button><button class="btn-card-action" onclick="captureCard('${u}')">ğŸ“¸ ì´ë¯¸ì§€ ì €ì¥</button></div>`:''}`;tg.appendChild(c)}

function switchTab(tb,el){document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));el.classList.add('active');['gen-panel','stats-panel','win-panel','history-panel','store-panel'].forEach(id=>{const p=document.getElementById(id);if(p)p.classList.add('hidden')});document.getElementById(tb+'-panel').classList.remove('hidden');if(tb==='stats')renderHeatmap();if(tb==='win')renderH();if(tb==='history')loadGlobalTimeline();if(tb==='store')renderS();log(`ğŸ“‚ [${el.innerText}] íƒ­ìœ¼ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤.`)}

function updateStatsRange(r,el){currentStatsRange=r;el.parentElement.querySelectorAll('button').forEach(b=>b.classList.remove('active'));el.classList.add('active');renderHeatmap()}

function renderHeatmap(){const g=document.getElementById('heatmap-grid');g.innerHTML='';const d=DB[currentMode].slice(0,currentStatsRange),ct={},mv=currentMode==='lotto'?45:9,sv=currentMode==='lotto'?1:0;d.forEach(r=>{r.n.forEach(n=>ct[n]=(ct[n]||0)+1);if(currentMode==='lotto'&&r.b)ct[r.b]=(ct[r.b]||0)+1});const vs=Object.values(ct),mc=Math.max(...(vs.length?vs:[1]));for(let i=sv;i<=mv;i++){const c=ct[i]||0,rt=c/mc,cl=document.createElement('div');cl.className='heatmap-cell';if(c>0){cl.classList.add('active');cl.style.backgroundColor=`rgba(56, 189, 248, ${0.1+(rt*0.6)})`;cl.style.borderColor=`rgba(56, 189, 248, ${0.3+(rt*0.7)})`}cl.innerHTML=`<span class="hm-num" style="color:${rt>0.7?'#fff':'var(--text)'}">${i}</span><span class="hm-count">${c}íšŒ</span>`;g.appendChild(cl)}const st=Object.entries(ct).sort((a,b)=>b[1]-a[1]);document.getElementById('stat-max-n').innerText=st[0]?`${st[0][0]}ë²ˆ`:'--';const un=Array.from({length:mv-sv+1},(_,i)=>i+sv).filter(n=>!ct[n]);document.getElementById('stat-min-n').innerText=un.length>0?`${un[0]}ë²ˆ`:'--'}

function renderH(){const l=document.getElementById('win-list');l.innerHTML='';DB[currentMode].forEach(h=>renderCard(l,{...h,...getMetrics(h.n)},true))}

function saveData(){const sk=currentMode==='lotto'?'v13_db':'v13_pension_db';if(!window.sessionData.length)return;localStorage.setItem(sk,JSON.stringify([...window.sessionData,...JSON.parse(localStorage.getItem(sk)||'[]')]));alert("ğŸ’¾ ì €ì¥ì†Œ ë³´ê´€ ì™„ë£Œ");updateBatchCopyBtn('store')}

function renderS(){const sk=currentMode==='lotto'?'v13_db':'v13_pension_db',l=document.getElementById('store-list'),br=document.getElementById('store-batch-row'),sd=JSON.parse(localStorage.getItem(sk)||'[]');l.innerHTML='';if(sd.length===0){if(br)br.style.display='none';l.innerHTML='<div class="ai-comment" style="text-align:center;">ğŸ“‚ ë³´ê´€ëœ ì¡°í•©ì´ ì—†ìŠµë‹ˆë‹¤.</div>'}else{if(br)br.style.display='flex';sd.forEach(i=>renderCard(l,i,false))}updateBatchCopyBtn('store')}

function resetStore(){if(confirm("ë¹„ìš°ì‹œê² ìŠµë‹ˆê¹Œ?")){localStorage.removeItem(currentMode==='lotto'?'v13_db':'v13_pension_db');renderS();log('ğŸ—‘ï¸ ì €ì¥ì†Œë¥¼ ë¹„ì› ìŠµë‹ˆë‹¤.')}}
window.onscroll=()=>{document.getElementById("btn-top").style.display=document.documentElement.scrollTop>300?"flex":"none"};

async function captureSlip(t){const sk=currentMode==='lotto'?'v13_db':'v13_pension_db',d=t==='gen'?window.sessionData:JSON.parse(localStorage.getItem(sk)||'[]');if(!d.length)return;const tp=Math.ceil(d.length/5);log(`ğŸ“¸ ì´ ${d.length}ê°œ ì¡°í•© (${tp}ì¥) ìŠ¬ë¦½ ìƒì„± ì¤‘...`);const z=document.getElementById('slip-render-zone'),lt=document.getElementById('slip-list-target'),st=document.getElementById('slip-title'),l=DB[currentMode][0],rn=l?l.r+1:'0000',imgs=[];st.innerText=currentMode==='lotto'?'QUANTUM LOTTO':'QUANTUM PENSION';for(let p=0;p<tp;p++){const ch=d.slice(p*5,(p+1)*5);document.getElementById('slip-round').innerHTML=`<span style="color:#f43f5e; font-weight:900;">[&nbsp;${p+1} &nbsp;/&nbsp; ${tp}&nbsp;]</span> &nbsp; ì œ &nbsp; ${rn} &nbsp; íšŒ &nbsp; ë¶„ì„ì¡°í•©`;document.getElementById('slip-time').innerHTML=new Date().toLocaleString().replace(/:/g,' : ');document.getElementById('slip-price').innerText=`ê¸ˆì•¡ â‚© ${(ch.length*1000).toLocaleString()}`;lt.innerHTML=ch.map((i,x)=>{const ci=String.fromCharCode(65+x),nh=i.n.map(n=>`<span class="slip-num-unit" style="width:52px; text-align:center; display:inline-block; font-family:'Roboto Mono'; font-size:1.6rem; font-weight:900;">${n.toString().padStart(currentMode==='lotto'?2:1,'0')}</span>`).join('');return`<div class="slip-row" style="display:flex; align-items:center; margin-bottom:15px;"><span class="slip-tag">${ci} ì¡°í•©</span>${i.group?`<span style="font-weight:900; margin-right:15px; font-size:1.3rem;">${i.group}</span>`:''}<div style="flex:1; display:flex; justify-content:space-between;">${nh}</div></div>`}).join('');try{const cv=await html2canvas(z,{scale:3,backgroundColor:'#fff',useCORS:true});imgs.push(cv.toDataURL("image/png"))}catch(e){log(`âš ï¸ ${p+1}ë²ˆ ìŠ¬ë¦½ ìƒì„± ì‹¤íŒ¨`);console.error(e)}}const im=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);if(!im){log("â¬‡ï¸ PC í™˜ê²½: íšŒì°¨ë³„ ìŠ¬ë¦½ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ í•©ë‹ˆë‹¤...");for(let i=0;i<imgs.length;i++){try{const sr=imgs[i],rs=await fetch(sr),bl=await rs.blob(),u=URL.createObjectURL(bl),lk=document.createElement('a');lk.href=u;const mn=currentMode==='lotto'?'ë¡œë˜':'ì—°ê¸ˆ';lk.download=`${rn}íšŒ_${mn}_ìŠ¬ë¦½_p${i+1}.png`;document.body.appendChild(lk);lk.click();lk.remove();URL.revokeObjectURL(u)}catch(e){log(`âš ï¸ ìŠ¬ë¦½ ${i+1} ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨`)}}}else{const nw=window.open("","_blank");if(nw){const it=imgs.map((s,x)=>`<div class="slide" style="display: ${x===0?'flex':'none'}; flex-direction:column; align-items:center;"><p style="margin-bottom:20px; font-size:18px; font-weight:900;">ğŸ‘‡ [${x+1}/${imgs.length}] ì´ë¯¸ì§€ë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬ ì €ì¥í•˜ì„¸ìš”</p><img src="${s}" style="max-width:92%; border-radius:5px; box-shadow:0 0 40px rgba(255,255,255,0.2);" /></div>`).join('');nw.document.write(`<body style="margin:0; background:#000; color:#fff; font-family:sans-serif; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; overflow:hidden;"><div id="slider-container" style="width:100%; display:flex; flex-direction:column; align-items:center;">${it}</div><div style="display:flex; gap:25px; margin-top:40px;"><button id="prev" onclick="move(-1)" style="padding:15px 30px; background:#334155; color:#fff; border:none; border-radius:12px; font-weight:900; font-size:16px; cursor:pointer;">ì´ì „</button><button id="next" onclick="move(1)" style="padding:15px 30px; background:#38bdf8; color:#000; border:none; border-radius:12px; font-weight:900; font-size:16px; cursor:pointer;">ë‹¤ìŒ</button></div><button onclick="window.close()" style="margin-top: 40px; padding: 10px 20px; color: white; background-color: #ef4444; border: none; border-radius: 6px; font-size: 16px; font-weight: bold; cursor: pointer;">ì°½ ë‹«ê¸°</button><script>let current = 0;const slides = document.getElementsByClassName('slide');function move(dir) {slides[current].style.display = 'none';current = (current + dir + slides.length) % slides.length;slides[current].style.display = 'flex';}<\/script></body>`)}}}
</script>
</body>
</html>
